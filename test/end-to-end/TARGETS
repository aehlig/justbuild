{ "git-import-under-test":
  { "type": "install"
  , "files":
    {"bin/git-import-under-test": ["@", "src", "", "bin/just-import-git.py"]}
  }
, "deduplicate-tool-under-test":
  { "type": "install"
  , "files":
    { "bin/deduplicate-tool-under-test":
      ["@", "src", "", "bin/just-deduplicate-repos.py"]
    }
  }
, "lock-tool-under-test":
  { "type": "install"
  , "files": {"bin/lock-tool-under-test": ["@", "src", "", "bin/just-lock.py"]}
  }
, "remote tests (unconfigured)":
  { "type": ["@", "rules", "test", "suite"]
  , "arguments_config": ["TEST_COMPATIBLE_REMOTE", "TEST_BOOTSTRAP_JUST_MR"]
  , "stage":
    [ { "type": "if"
      , "cond": {"type": "var", "name": "TEST_COMPATIBLE_REMOTE"}
      , "then": "compatible"
      , "else": "native"
      }
    ]
  , "deps":
    { "type": "++"
    , "$1":
      [ [["./", "remote-execution", "TESTS"], ["./", "just-mr", "TESTS"]]
      , { "type": "if"
        , "cond": {"type": "var", "name": "TEST_BOOTSTRAP_JUST_MR"}
        , "then": []
        , "else":
          [ ["./", "serve-service", "TESTS"]
          , ["./", "computed-roots", "TESTS"]
          , ["./", "tree-structure", "TESTS"]
          ]
        }
      ]
    }
  }
, "remote tests, compatible":
  { "type": "configure"
  , "tainted": ["test"]
  , "target": "remote tests (unconfigured)"
  , "config":
    {"type": "singleton_map", "key": "TEST_COMPATIBLE_REMOTE", "value": true}
  }
, "remote tests, native":
  { "type": "configure"
  , "tainted": ["test"]
  , "target": "remote tests (unconfigured)"
  , "config":
    {"type": "singleton_map", "key": "TEST_COMPATIBLE_REMOTE", "value": false}
  }
, "remote tests":
  { "type": ["@", "rules", "test", "suite"]
  , "stage": ["using-remote"]
  , "deps": ["remote tests, compatible", "remote tests, native"]
  }
, "just-mr tests (unconfigured)":
  { "type": ["@", "rules", "test", "suite"]
  , "arguments_config": ["TEST_BOOTSTRAP_JUST_MR"]
  , "stage":
    [ { "type": "if"
      , "cond": {"type": "var", "name": "TEST_BOOTSTRAP_JUST_MR"}
      , "then": "bootstrap-script"
      , "else": "native"
      }
    ]
  , "deps":
    { "type": "`"
    , "$1":
      [ "remote tests"
      , ["./", "built-in-rules", "TESTS"]
      , ["./", "cli", "TESTS"]
      , ["./", "just-lock", "TESTS"]
      , ["./", "target-cache", "TESTS"]
      , ["./", "gc", "TESTS"]
      , ["./", "git-import", "TESTS"]
      , { "type": ",@"
        , "$1":
          { "type": "if"
          , "cond": {"type": "var", "name": "TEST_BOOTSTRAP_JUST_MR"}
          , "else": [["./", "profile", "TESTS"]]
          }
        }
      ]
    }
  }
, "just-mr tests, bootstrap-script":
  { "type": "configure"
  , "tainted": ["test"]
  , "target": "just-mr tests (unconfigured)"
  , "config": {"type": "'", "$1": {"TEST_BOOTSTRAP_JUST_MR": true}}
  }
, "just-mr tests, native":
  { "type": "configure"
  , "tainted": ["test"]
  , "target": "just-mr tests (unconfigured)"
  , "config": {"type": "'", "$1": {"TEST_BOOTSTRAP_JUST_MR": false}}
  }
, "just-mr tests":
  { "type": ["@", "rules", "test", "suite"]
  , "stage": ["with-just-mr"]
  , "deps": ["just-mr tests, bootstrap-script", "just-mr tests, native"]
  }
, "TESTS":
  { "type": ["@", "rules", "test", "suite"]
  , "arguments_config": ["TEST_BOOTSTRAP_JUST_MR"]
  , "stage": ["end-to-end"]
  , "deps":
    { "type": "`"
    , "$1":
      [ "just-mr tests"
      , ["./", "actions", "TESTS"]
      , ["./", "build-fails", "TESTS"]
      , ["./", "execution-service", "TESTS"]
      , ["./", "generated-binary", "TESTS"]
      , ["./", "symlinks", "TESTS"]
      , ["./", "target-tests", "TESTS"]
      , ["./", "user-errors", "TESTS"]
      ]
    }
  }
}
