{% extends "base.html" %}
{% block heading %}
Recent Invocations
{% endblock %}

{% block content %}
{% if filter_info %}
<h1>Invocations filtered by {{ filter_info | e }}</h1>
{% else %}
<h1>Recent Invocations</h1>
{% endif %}
{% if invocations %}
<ul>
  {% for invocation in invocations %}
  <li> <a href="/invocations/{{invocation.name |e}}"><tt>{{ invocation.name | e }}</tt></a>
    {% if invocation.subcommand %}
    <tt>{{ invocation.subcommand | e }}</tt>
    {% endif %}
    {% if invocation.remote_address %}
    (on <tt>{{ invocation.remote_address | e }}@{{ invocation.remote_props | e }}</tt>)
    {% endif %}
    {% if invocation.target %}
    <tt>{{ invocation.target | e}}@{{ invocation.config | e}}</tt>
    {% endif %}
    {% if invocation.exit_code != 0 %}
    <b>
      {% if invocation.exit_code == 1 %}
      build failed
      {% elif invocation.exit_code == 2 %}
      failed
      {% elif invocation.exit_code == 8 %}
      analysis failure
      {% elif invocation.exit_code == 16 %}
      build-environment failure
      {% elif invocation.exit_code == 32 %}
      syntax/invocation error
      {% else %}
      exit code {{ invocation.exit_code | e }}
      {% endif %}
    </b>
    {% endif %}
  </li>
  {% endfor %}
</ul>
{% else %}
<i>(none)</i>
{% endif %}
{% endblock %}
